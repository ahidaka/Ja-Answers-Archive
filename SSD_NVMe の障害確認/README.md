# SSD/NVMe の障害確認

ご自身でSSD/NVMeドライブを交換できる方向けの、トラブル対応の上級者用の参考記事です。メーカー製PCをご利用の方は、保証が無くなる可能性があるため、不具合発生時は各メーカーサポートに相談して下さい。

SSD/NVMe デバイスは安価・小型かつ高速・大容量で便利なため、ここ2~3年で急激に普及しました。しかしながら製品品質や機能・性能も多種多様で、故障などのトラブルも増えています。私は去年まで20台ぐらいのSSDを使用して来ましたが、いずれも**不具合ファームウェアの更新**した以外、全数正常に利用出来ていました。しかし自作PCの新品SSDで、去年新たに1件（修復不可、メーカー交換）と今年3件（修復実験中）の障害があり、HDDと比べても多いトラブルを経験しています。その様な事情で、独自の見地により対処法をまとめました。主に自作PC向けの記事ですが、保証期間が過ぎたBTOやメーカー製PCの保守運用目的にも役立つかも知れません。

障害状況の例

まず SSD/NVMe(M.2) デバイスの障害状況は、多種多様なのが特徴です。共通点は「正常動作しない」ことぐらいだと理解しておいた方が良いでしょう。**定番ツールのCrystalDiskInfoで異常が報告されない場合があります。**各SSDの障害は、たかだか6台程度の不具合経験ですが、いずれも購入後半年から２年前後で発症しています。従ってなるべく、無償保障期間が2年以上の製品を購入した方がいいでしょう。経験した不具合の状況を次に示します。

１．購入後半年から2年程度（いわゆる初期不良では無い）

２．メーカー、型番は様々、いずれも安価または普及価格帯の製品

３．実験用途が多いため、IO回数や通電時間は少ない

４．サーバー用などの常時通電マシンでは（たまたま？）発生していない

５．不具合状況の例：

- Windowsの起動時のエラーなどの基本動作の異常

- CHKDSK の異常終了

- パーティション設定操作の異常終了

- ファイルコピーはデータ化け無く正常終了

- Write性能の著しい低下

- マザーボードから認識しない

対応手順

重要なことは「何かおかしい」と思ったらなるべく早く重要なファイルのバックアップを取り、以降は用心深く使用することです。可能であれば、不具合が疑われるメディアを正常動作する別のメディアに交換します。不具合ドライブは保障期間内であれば、問題再現手順を明確に説明することで、容易に新品に交換か、またはファームウェア更新等で正常品に修理して貰えます。これら操作は、その交換ための準備作業と考えると分かり易いでしょう。

１．CristalDiskInfoでの正常性確認

CristalDiskInfoは毎年の様に機能向上し、近年ではSSD/NVMe用の診断機能が搭載されています。まずは、最新版で正常性を確認します。

これが水色以外の色で報告される場合は異常です。以降の確認動作は意味がありません。

メディアの交換かまたは、可能な場合はメーカー製ツールによる診断、修復、ファームウェア更新が必要です。

**以降の操作はデータが無くなることが大前提です。ご注意ください。**

２．メーカー製ツールによる診断

一部のSSD製造メーカーではSSDの診断、修復ツール（Windowsアプリ）を用意している場合があります。入手出来れば、対象のディスクをCドライブ以外に接続して、指示に従って診断、修復します。

この場合も、以降の確認動作は意味がありません。診断・修復後、修理に出すかどうかはご自身で判断して下さい。

以降の操作はメーカー診断ツールが入手出来ない場合や、あるいは正常動作の確認をしたい場合の方法です。基本的には順不動なので、ご自身で気になる操作を好きなだけ確認しても構いません。

３．物理フォーマット、パーティション設定のし直しの繰り返し実行

HDDのバッドブロック（不良セクター）は、「クイックフォーマット」では無い、物理フォーマットで修復出来ることがよくあります。物理フォーマットは各ブロックのRead/Writeを行うので正常動作の確認用には、重要な作業です。以前経験した不具合では、「物理フォーマット」でエラーになった個体がありました。状況に応じて繰り返し実行することで、正常動作を確認します。

実行方法は「コンピューターの管理」、「設定 > ストレージ > ディスクとボリューム」、「管理者権限のコマンドプロンプト」等、どの方法でも同じです。

４．大容量ファイルのコピー動作の正常動作確認

エクスプローラーで大容量のファイルをコピー操作して、正常動作するかどうかを確認します。残念ながらこの方法で不具合を発見、確認したことは一度も経験していません。「一応」「念のため」以上の意味はありません。

５．chkdsk /rの繰り返し実行

管理者権限のコマンドプロンプトで以下を実行します。これでエラーが出たり、修復出来る場合があります。エラーや警告が無くなるまで繰り返し実行します。問題がある場合、永久にエラーがで続ける場合があります。コメントで [七辻屋](https://answers.microsoft.com/ja-jp/profile/095a2ce4-7fde-4973-a345-cfbd6784154f) さんの成功させるための指摘があるので、上手く行かない方は参照してください。

```
chkdsk d: /r
```

```
（問題ドライブレターが「d」の場合）
```

６．CristalDiskMarkでの性能確認

性能劣化の不具合は見つけ難いため、ベンチマークテストの性能を計測して、世間の一般的な値やその製品の基本性能と比較します。不具合ドライブは100分の1程度しか性能が出ない場合があります。なお基本的にSSDとNVMeではデータ転送方式が異なるため、10倍以上の速度差があります。

７．再度のCristalDiskInfoでの正常性確認

これらのテストを繰り返し実行していると、デバイスの状態が変化する場合があります。容易に「異常」状態を表示するCrystalDiskInfoの再実行は重要です。

ファームウェア更新

SSD と NVMe はそれ自体が小さなマイコンであるため、それを制御するファームウェア更新は、時として重要なメンテナンス作業となります。SSDの 問題は発生頻度がごく僅かな場合、あるいは一定以上の使用頻度でないと発生しないケースがあります。使用しているドライブ（メディア）製品にその様な障害報告が無いか、あるいは問題修復のためのファームウェアが公開されていないかを確認してみることも重要です。冒頭で紹介した5年ぐらい前の SSD は3台、いずれもエラーが出ていましたが、ファームウェア更新により全て現在でも正常動作しています。

障害発生時の対処方法

不具合を確認した場合の対処方法は、メーカー製PCの場合には「修理」、自作PC等の場合は「交換（買い替え）」です。SSD は HDD とは仕組みが異なるため、基本的には個人で修復出来ません。ドライブ単体購入で保証期間内の場合は購入店に送付して「修理」依頼をすると、新品に「交換」して貰える場合が多いです。なお前述の様にメーカーによっては、メーカー製ツールを使用して「ファームウェア更新」や「修復」が出来る場合があります。基本的には全て自己責任での対応作業となるため、保証期間内であれば購入店への相談を推奨します。

参考情報

最近報告されたSSDの故障が原因と推測される質問の例

ウィンドウが勝手に画面外に移動したり、極端に小さいサイズで表示されたりする

[https://answers.microsoft.com/ja-jp/windows/forum/all/%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6/04035662-8149-4032-8e92-f7dce3e7e4e0](https://answers.microsoft.com/ja-jp/windows/forum/all/%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6/04035662-8149-4032-8e92-f7dce3e7e4e0)

フォルダーにアクセス出来なくなる。

[https://answers.microsoft.com/ja-jp/windows/forum/all/%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/b68e8f85-ffbe-4b0d-9361-69f3aa4e13c5](https://answers.microsoft.com/ja-jp/windows/forum/all/%E3%83%95%E3%82%A9%E3%83%AB%E3%83%80%E3%83%BC/b68e8f85-ffbe-4b0d-9361-69f3aa4e13c5)

LENOVOを起動すると2101：Detection error on SSD (M.2)と表示される。ESCを押すと修復画面が立ち上がるが何をしても起動できない。 [https://answers.microsoft.com/ja-jp/windows/forum/all/lenovo%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99/7be923d8-a672-4d16-a7f2-07c31b9203ed](https://answers.microsoft.com/ja-jp/windows/forum/all/lenovo%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99/7be923d8-a672-4d16-a7f2-07c31b9203ed)

Windowsが起動しなくなったCドライブからデータ救出。

[https://answers.microsoft.com/ja-jp/windows/forum/all/windows%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%97/77e5e406-6f3b-4e0c-a683-f4b1a6933a5c](https://answers.microsoft.com/ja-jp/windows/forum/all/windows%E3%81%8C%E8%B5%B7%E5%8B%95%E3%81%97/77e5e406-6f3b-4e0c-a683-f4b1a6933a5c)

起動時に毎回「ドライブのスキャンおよび修復中が表示される

[https://answers.microsoft.com/ja-jp/windows/forum/all/%E8%B5%B7%E5%8B%95%E6%99%82%E3%81%AB%E6%AF%8E/80b0dba4-f73e-41a3-9dff-93abd26e12c1](https://answers.microsoft.com/ja-jp/windows/forum/all/%E8%B5%B7%E5%8B%95%E6%99%82%E3%81%AB%E6%AF%8E/80b0dba4-f73e-41a3-9dff-93abd26e12c1)

チェックディスクが実行できない

[https://answers.microsoft.com/ja-jp/windows/forum/all/%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%83%87/341a90df-ba0a-413f-a4e6-ba5a4b4704ba](https://answers.microsoft.com/ja-jp/windows/forum/all/%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%83%87/341a90df-ba0a-413f-a4e6-ba5a4b4704ba)

この記事は必要に応じて追加、修正します。コメントがあればお願いします。

（8月20日）対処方法を追加しました。
